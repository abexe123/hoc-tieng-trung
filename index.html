<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Luyện từ vựng tiếng Trung</title>

<style>
body {
  font-family: Arial, sans-serif;
  max-width: 520px;
  margin: 40px auto;
}
h2 {
  margin-bottom: 12px;
}
input {
  width: 100%;
  padding: 10px;
  font-size: 18px;
}
button {
  padding: 8px 16px;
  font-size: 16px;
  margin-top: 10px;
}
#result {
  margin-top: 10px;
  font-size: 18px;
  font-weight: bold;
}
.correct { color: green; }
.wrong { color: red; }
</style>
</head>

<body>

<h2 id="question">Đang tải dữ liệu…</h2>

<input
  id="answer"
  placeholder="Nhập tiếng Trung rồi nhấn Enter"
  autocomplete="off"
  autofocus
>

<div>
  <button onclick="skip()">Bỏ qua</button>
</div>

<div id="result"></div>

<script>
let vocab = [];
let current = null;

// =====================
// LOAD CSV UTF-8
// =====================
<script>
let vocab = [];
let current = null;

fetch("vocab.csv")
  .then(r => r.text())
  .then(text => {
    const lines = text.split(/\r?\n/);

    vocab = lines.map(line => {
      const parts = line.split(",");
      if (parts.length < 2) return null;

      const vi = parts[0].trim();
      const zh = parts.slice(1).join(",").trim(); // đề phòng có dấu ,

      // lọc rác
      if (
        !vi || !zh ||
        vi.includes("<") ||
        zh.includes("<") ||
        vi.includes("base64") ||
        zh.includes("base64")
      ) return null;

      return { vi, zh };
    }).filter(Boolean);

    console.log("Số từ load được:", vocab.length);

    if (vocab.length === 0) {
      document.getElementById("question").innerText =
        "❌ Không có dữ liệu hợp lệ trong vocab.csv";
      return;
    }

    nextWord();
  })
  .catch(err => {
    document.getElementById("question").innerText =
      "❌ Không đọc được vocab.csv";
    console.error(err);
  });

function randomItem() {
  return vocab[Math.floor(Math.random() * vocab.length)];
}

function nextWord() {
  current = randomItem();
  document.getElementById("question").innerText =
    "Dịch sang tiếng Trung: " + current.vi;
  document.getElementById("answer").value = "";
  document.getElementById("result").innerText = "";
  document.getElementById("answer").focus();
}
</script>
  })
  .catch(err => {
    document.getElementById("question").innerText =
      "❌ Lỗi đọc vocab.csv";
    console.error(err);
  });

// =====================
// RANDOM
// ================
